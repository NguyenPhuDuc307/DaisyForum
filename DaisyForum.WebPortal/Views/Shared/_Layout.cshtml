@* @inject IConfiguration Configuration
@{
var siteKey = Configuration.GetSection("GoogleRecaptcha").GetSection("Sitekey").Value ?? "";
} *@
<!DOCTYPE html>
<html lang="vi-VN">

<head>
    <!-- META TAGS -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>@ViewData["Title"]</title>
    <meta name="description" content="@ViewData["Description"]">

    <link rel="shortcut icon" href="~/favicon.svg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="~/css/site.css" />
    <link rel="stylesheet" href="~/css/style.css" />
    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500,600,400i,700&display=fallback">

    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
    <script src="https://www.google.com/recaptcha/api.js?render=6LfFjwMmAAAAAHW8hxSxISs4T8EXzjI7SLaAsj4t"></script>
    <script>
        window.OneSignal = window.OneSignal || [];
        OneSignal.push(function () {
            OneSignal.init({
                appId: "9dc7aa96-3d3a-473c-adf6-71bf429ce505",
            });
        });
    </script>
</head>

<body data-bs-theme="light">
    <!-- Start of Header -->
    <div>
        <!-- Start of Main Navigation -->
        @await Component.InvokeAsync("NavBar")
        <!-- End of Main Navigation -->
    </div>

    @* <partial name="_SearchBar" /> *@

    <div style="margin-top: 4.75rem">
        @RenderBody()
    </div>

    @await Component.InvokeAsync("Footer")
    <!-- End of Footer -->

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    @* <link href="https://cdnjs.cloudflare.com/ajax/libs/jquery-treeview/1.0.1/jquery.treeview.min.css"
    rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-treeview/1.0.1/jquery.treeview.min.js"></script> *@
    <script src="https://cdn.jsdelivr.net/npm/@@popperjs/core@2.11.7/dist/umd/popper.min.js"
        integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"
        integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ"
        crossorigin="anonymous"></script>
    <script type='text/javascript' src='/js/jquery.easing.1.3.js'></script>
    <script type='text/javascript' src='/js/prettyphoto/jquery.prettyPhoto.js'></script>
    <script type='text/javascript' src='/js/jquery.liveSearch.js'></script>
    <script type='text/javascript' src='/js/jquery.form.js'></script>
    <script type='text/javascript' src='/js/jquery.validate.min.js'></script>
    <script type='text/javascript' src='/js/custom.js'></script>
    <script type="text/javascript" src="/js/site.js"></script>
    </script>
    <partial name="_ValidationScriptsPartial" />
    @RenderSection("scripts", required: false)
</body>

</html>

<script>
    $('form').submit(function (e) {
        e.preventDefault();
        grecaptcha.ready(function () {
            grecaptcha.execute('6LfFjwMmAAAAAHW8hxSxISs4T8EXzjI7SLaAsj4t', { action: 'homepage' }).then(function (token) {
                $.getJSON("/Account/Verify?token=" + token,
                    function (data) {
                        console.log(data);
                        if (data) {
                            $('form').unbind('submit').submit();
                        }
                        else {
                            document.location = "@Url.Action("Error", "Home")";
                        }
                    });
            });
        });
    });
</script>